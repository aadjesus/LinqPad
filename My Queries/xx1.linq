<Query Kind="Program">
  <Reference>&lt;RuntimeDirectory&gt;\netstandard.dll</Reference>
  <Reference Relative="..\..\..\..\.nuget\packages\newtonsoft.json\13.0.1\lib\netstandard2.0\Newtonsoft.Json.dll">C:\Users\AlessandroAugusto\.nuget\packages\newtonsoft.json\13.0.1\lib\netstandard2.0\Newtonsoft.Json.dll</Reference>
</Query>

void Main()
{
	var ccc = "[{'Id':7860,'Numero':46688,'Prefixo':'0000915','Tipo':1,'Abertura':'2023-01-02T18:29:14.53','Previsao':'2023-12-13T03:33:44.557','RetornoProg':'2023-12-10T13:00:00','EmExecucao':false,'AchouFunc':false,'TempoRestante':'7901:26:35','Status':'Aberta','TempoRestanteTmp':'329.05:26:35.9173837','StatusTmp':'02'},{'Id':7861,'Numero':46689,'Prefixo':'0000915','Tipo':1,'Abertura':'2023-01-02T18:29:17.98','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7862,'Numero':46690,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:20.21','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7863,'Numero':46691,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:22.477','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7864,'Numero':46692,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:24.663','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7865,'Numero':46693,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:26.883','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7866,'Numero':46695,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:29.46','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7867,'Numero':46696,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:31.727','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7868,'Numero':46697,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:33.94','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7869,'Numero':46698,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:36.143','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7870,'Numero':46699,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:38.347','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7871,'Numero':46700,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:40.553','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7872,'Numero':46701,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:42.76','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7873,'Numero':46702,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:44.96','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7874,'Numero':46703,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:47.917','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7875,'Numero':46704,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:50.147','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7876,'Numero':46706,'Prefixo':'0000925','Tipo':1,'Abertura':'2023-01-02T18:29:52.707','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7877,'Numero':46707,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:29:54.997','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7878,'Numero':46709,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:29:57.487','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7879,'Numero':46710,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:29:59.727','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7880,'Numero':46711,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:02.02','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7881,'Numero':46712,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:04.28','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7882,'Numero':46713,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:06.537','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7883,'Numero':46714,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:08.75','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7884,'Numero':46715,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:11.023','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7885,'Numero':46716,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:13.237','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7886,'Numero':46718,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:16.167','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7887,'Numero':46719,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:18.423','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7888,'Numero':46720,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:20.743','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7889,'Numero':46721,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:22.98','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7890,'Numero':46722,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:25.28','Previsao':null,'RetornoProg':null,'EmExecucao':false,'AchouFunc':false,'TempoRestante':null,'Status':'Aberta','TempoRestanteTmp':'10675199.02:48:05.4775807','StatusTmp':'12'},{'Id':7891,'Numero':46723,'Prefixo':'0000935','Tipo':1,'Abertura':'2023-01-02T18:30:27.463','Previsao':'2023-01-17T06:35:39.81','RetornoProg':'2023-01-17T18:39:33','EmExecucao':false,'AchouFunc':true,'TempoRestante':'-16:31:28','Status':'Alocada','TempoRestanteTmp':'-15:31:28.8297678','StatusTmp':'01'},{'Id':7892,'Numero':46724,'Prefixo':'0001760','Tipo':1,'Abertura':'2023-01-02T18:30:29.737','Previsao':'2023-01-17T06:35:39.81','RetornoProg':'2023-01-17T12:39:33.47','EmExecucao':false,'AchouFunc':true,'TempoRestante':'-16:31:28','Status':'Alocada','TempoRestanteTmp':'-15:31:28.8297747','StatusTmp':'01'},{'Id':7893,'Numero':46725,'Prefixo':'0001760','Tipo':1,'Abertura':'2023-01-02T18:30:32.113','Previsao':'2023-01-17T06:35:39.81','RetornoProg':'2023-01-17T12:39:33.47','EmExecucao':true,'AchouFunc':true,'TempoRestante':'-16:31:28','Status':'Em execução','TempoRestanteTmp':'-15:31:28.8297810','StatusTmp':'00'},{'Id':7894,'Numero':46726,'Prefixo':'0001760','Tipo':1,'Abertura':'2023-01-02T18:30:34.343','Previsao':'2023-01-17T06:35:39.81','RetornoProg':'2023-01-17T12:39:33.47','EmExecucao':false,'AchouFunc':false,'TempoRestante':'-16:31:28','Status':'Aberta','TempoRestanteTmp':'-15:31:28.8297875','StatusTmp':'02'},{'Id':7895,'Numero':46727,'Prefixo':'0001760','Tipo':1,'Abertura':'2023-01-02T18:31:01.16','Previsao':'2023-01-17T06:35:00','RetornoProg':'2023-01-17T12:39:00','EmExecucao':false,'AchouFunc':false,'TempoRestante':'-16:32:08','Status':'Aberta','TempoRestanteTmp':'-15:32:08.6397938','StatusTmp':'02'},{'Id':7896,'Numero':46728,'Prefixo':'0001760','Tipo':1,'Abertura':'2023-01-02T18:31:03.823','Previsao':'2023-01-17T06:35:39.81','RetornoProg':'2023-01-17T12:39:33.47','EmExecucao':false,'AchouFunc':false,'TempoRestante':'-16:31:28','Status':'Aberta','TempoRestanteTmp':'-15:31:28.8298003','StatusTmp':'02'},{'Id':7897,'Numero':46729,'Prefixo':'0001760','Tipo':0,'Abertura':'2023-01-02T18:31:06.03','Previsao':'2023-12-22T10:00:00','RetornoProg':'2023-12-22T10:00:00','EmExecucao':false,'AchouFunc':false,'TempoRestante':'8124:52:51','Status':'Aberta','TempoRestanteTmp':'338.11:52:51.3601932','StatusTmp':'02'},{'Id':7898,'Numero':46730,'Prefixo':'0001760','Tipo':1,'Abertura':'2023-01-02T18:31:08.287','Previsao':'2023-01-16T10:35:53.01','RetornoProg':'2023-01-17T12:39:33.47','EmExecucao':true,'AchouFunc':true,'TempoRestante':'-36:31:15','Status':'Em execução','TempoRestanteTmp':'-1.11:31:15.6298183','StatusTmp':'00'},{'Id':7899,'Numero':46731,'Prefixo':'0001760','Tipo':1,'Abertura':'2023-01-02T18:31:10.51','Previsao':'2023-01-16T10:35:53.01','RetornoProg':'2023-01-17T12:39:33.47','EmExecucao':false,'AchouFunc':true,'TempoRestante':'-36:31:15','Status':'Alocada','TempoRestanteTmp':'-1.11:31:15.6298252','StatusTmp':'01'}]";
	var x1 = Newtonsoft.Json.JsonConvert.DeserializeObject<IEnumerable<Foo>>(ccc)
		.OrderBy(o=> o.TempoRestanteTmp)
		.GroupBy(g => (g.TempoRestanteTmp.Ticks < 0 ? 0 : g.TempoRestanteTmp == TimeSpan.MaxValue ? 2 : 1))
		//.OrderBy(o=> o.Key)
		.Select(s=> new 
		{
			s.Key,
			xx1 = s.Select(s2=> s2.TempoRestanteTmp).ToArray()
		})
        //.SelectMany(s => (s.Key
        //                    ? s.OrderBy(o => o.TempoRestanteTmp).ThenBy(t => t.StatusTmp)
        //                    : s.OrderBy(o => o.StatusTmp)))
		;
	x1.Dump();
}

public enum eTipoOS : byte
{
    Corretiva,
    Preventiva
}
	
class Foo
{
		private const string EM_EXECUCAO = "Em execução";
        private const string ALOCADA = "Alocada";
        private const string ABERTA = "Aberta";

        public int Id { get; set; }
        public int Numero { get; set; }
        public string Prefixo { get; set; }
        public eTipoOS Tipo { get; set; }
        public DateTime Abertura { get; set; }
        public DateTime? Previsao { get; set; }
        public DateTime? RetornoProg { get; set; }
        public bool EmExecucao { get; set; }
        public bool AchouFunc { get; set; }

        public string TempoRestante
        {
            get
            {
                string retorno = null;
                if (TempoRestanteTmp != TimeSpan.MaxValue)
                    retorno = string.Format(
                        "{0:00}:{1:00}:{2:00}",
                        TempoRestanteTmp.TotalHours,
                        Math.Abs(TempoRestanteTmp.Minutes),
                        Math.Abs(TempoRestanteTmp.Seconds));

                return retorno;
            }
        }

        public string Status { get { return  
		EmExecucao
            ? EM_EXECUCAO
            : AchouFunc
                ? ALOCADA
                : ABERTA;}}

        public TimeSpan TempoRestanteTmp { get { return  
            Previsao == null
                ? TimeSpan.MaxValue
                : Previsao.Value.Subtract(DateTime.UtcNow);}}

        public string StatusTmp { get { return  
            string.Format(
                "{0}{1}",
                Convert.ToInt32(TempoRestanteTmp == TimeSpan.MaxValue),
                Status == EM_EXECUCAO ? 0 : Status == ALOCADA ? 1 : 2);}}

}